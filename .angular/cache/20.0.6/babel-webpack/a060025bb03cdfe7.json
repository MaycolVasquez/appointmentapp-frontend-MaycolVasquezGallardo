{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport { RouterModule } from '@angular/router';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../_service/product.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nfunction ProductListComponent_tr_18_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\")(10, \"button\", 4);\n    i0.ɵɵlistener(\"click\", function ProductListComponent_tr_18_Template_button_click_10_listener() {\n      const p_r2 = i0.ɵɵrestoreView(_r1).$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.edit(p_r2));\n    });\n    i0.ɵɵtext(11, \"Editar\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"button\", 5);\n    i0.ɵɵlistener(\"click\", function ProductListComponent_tr_18_Template_button_click_12_listener() {\n      const p_r2 = i0.ɵɵrestoreView(_r1).$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.confirmDelete(p_r2));\n    });\n    i0.ɵɵtext(13, \"Eliminar\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const p_r2 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(p_r2.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate((p_r2.category == null ? null : p_r2.category.name) || \"N/A\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate((p_r2.family == null ? null : p_r2.family.name) || \"N/A\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate((p_r2.laboratory == null ? null : p_r2.laboratory.name) || \"N/A\");\n  }\n}\nfunction ProductListComponent_div_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"div\", 6);\n  }\n}\nfunction ProductListComponent_div_20_p_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\")(1, \"strong\");\n    i0.ɵɵtext(2, \"Categor\\u00EDa:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r2.toDelete == null ? null : ctx_r2.toDelete.category == null ? null : ctx_r2.toDelete.category.name);\n  }\n}\nfunction ProductListComponent_div_20_p_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\")(1, \"strong\");\n    i0.ɵɵtext(2, \"Familia:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r2.toDelete == null ? null : ctx_r2.toDelete.family == null ? null : ctx_r2.toDelete.family.name);\n  }\n}\nfunction ProductListComponent_div_20_p_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\")(1, \"strong\");\n    i0.ɵɵtext(2, \"Laboratorio:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r2.toDelete == null ? null : ctx_r2.toDelete.laboratory == null ? null : ctx_r2.toDelete.laboratory.name);\n  }\n}\nfunction ProductListComponent_div_20_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 7)(1, \"div\", 8)(2, \"h3\");\n    i0.ɵɵtext(3, \"Confirmar eliminaci\\u00F3n\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"p\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(6, ProductListComponent_div_20_p_6_Template, 4, 1, \"p\", 9)(7, ProductListComponent_div_20_p_7_Template, 4, 1, \"p\", 9)(8, ProductListComponent_div_20_p_8_Template, 4, 1, \"p\", 9);\n    i0.ɵɵelementStart(9, \"div\", 10)(10, \"button\", 5);\n    i0.ɵɵlistener(\"click\", function ProductListComponent_div_20_Template_button_click_10_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.deleteConfirmed());\n    });\n    i0.ɵɵtext(11, \"Eliminar\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"button\", 11);\n    i0.ɵɵlistener(\"click\", function ProductListComponent_div_20_Template_button_click_12_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.cancelDelete());\n    });\n    i0.ɵɵtext(13, \"Cancelar\");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\"\\u00BFDesea eliminar \\\"\", ctx_r2.toDelete == null ? null : ctx_r2.toDelete.name, \"\\\"?\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.toDelete == null ? null : ctx_r2.toDelete.category == null ? null : ctx_r2.toDelete.category.name);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.toDelete == null ? null : ctx_r2.toDelete.family == null ? null : ctx_r2.toDelete.family.name);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.toDelete == null ? null : ctx_r2.toDelete.laboratory == null ? null : ctx_r2.toDelete.laboratory.name);\n  }\n}\nexport let ProductListComponent = /*#__PURE__*/(() => {\n  var _staticBlock;\n  class ProductListComponent {\n    constructor(productService, router) {\n      this.productService = productService;\n      this.router = router;\n      this.products = [];\n      // Modal de confirmación\n      this.showConfirm = false;\n    }\n    ngOnInit() {\n      this.load();\n    }\n    load() {\n      this.productService.list().subscribe({\n        next: data => {\n          this.products = data;\n        },\n        error: err => {\n          console.error('Error al cargar productos:', err);\n          alert('Error al cargar los productos. Por favor, intente nuevamente.');\n        }\n      });\n    }\n    edit(p) {\n      this.router.navigate(['/product', p.idProduct]);\n    }\n    confirmDelete(p) {\n      this.toDelete = p;\n      this.showConfirm = true;\n    }\n    cancelDelete() {\n      this.showConfirm = false;\n      this.toDelete = undefined;\n    }\n    deleteConfirmed() {\n      if (!this.toDelete?.idProduct) {\n        this.cancelDelete();\n        return;\n      }\n      this.productService.delete(this.toDelete.idProduct).subscribe({\n        next: () => {\n          this.cancelDelete();\n          this.load();\n        },\n        error: err => {\n          console.error('Error al eliminar producto:', err);\n          alert('Error al eliminar el producto. Por favor, intente nuevamente.');\n        }\n      });\n    }\n    static #_ = _staticBlock = () => (this.ɵfac = function ProductListComponent_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || ProductListComponent)(i0.ɵɵdirectiveInject(i1.ProductService), i0.ɵɵdirectiveInject(i2.Router));\n    }, this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: ProductListComponent,\n      selectors: [[\"app-product-list\"]],\n      decls: 21,\n      vars: 3,\n      consts: [[\"routerLink\", \"/product/new\"], [4, \"ngFor\", \"ngForOf\"], [\"class\", \"modal-backdrop\", 4, \"ngIf\"], [\"class\", \"modal\", 4, \"ngIf\"], [1, \"edit-btn\", 3, \"click\"], [1, \"delete-btn\", 3, \"click\"], [1, \"modal-backdrop\"], [1, \"modal\"], [1, \"modal-content\"], [4, \"ngIf\"], [1, \"modal-actions\"], [\"type\", \"button\", 3, \"click\"]],\n      template: function ProductListComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"h2\");\n          i0.ɵɵtext(1, \"Productos\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(2, \"button\", 0);\n          i0.ɵɵtext(3, \"Nuevo Producto\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(4, \"table\")(5, \"thead\")(6, \"tr\")(7, \"th\");\n          i0.ɵɵtext(8, \"Nombre\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(9, \"th\");\n          i0.ɵɵtext(10, \"Categoria\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(11, \"th\");\n          i0.ɵɵtext(12, \"Familia\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(13, \"th\");\n          i0.ɵɵtext(14, \"Laboratorio\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(15, \"th\");\n          i0.ɵɵtext(16, \"Acciones\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(17, \"tbody\");\n          i0.ɵɵtemplate(18, ProductListComponent_tr_18_Template, 14, 4, \"tr\", 1);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵtemplate(19, ProductListComponent_div_19_Template, 1, 0, \"div\", 2)(20, ProductListComponent_div_20_Template, 14, 4, \"div\", 3);\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(18);\n          i0.ɵɵproperty(\"ngForOf\", ctx.products);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.showConfirm);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.showConfirm);\n        }\n      },\n      dependencies: [CommonModule, i3.NgForOf, i3.NgIf, RouterModule, i2.RouterLink],\n      encapsulation: 2\n    }));\n  }\n  _staticBlock();\n  return ProductListComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}